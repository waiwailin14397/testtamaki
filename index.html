<html>
    <head>
        <meta charset="utf-8">
        <script src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
        <title>Tamaki App</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
      </head>
    <body>
        <!-- <div id="output"></div> -->
        <!-- <div id="outputname"></div> -->
        <!-- <div id="output"></div>
        <div id="id"></div>
        <div id="name"></div> -->
        <iframe src="./views/header.html" width="100%" height="5%" frameborder="0"></iframe>
        <div class="container-fluid">
            <form>
                <div class="card">
                    <div class="card-body">
                        <div class="d-grid gap-3">
                            <button type="button" class="btn btn-outline-success btn-block" onclick="navigateTo('./views/register.html')">登録申込</button>
                            <button type="button" class="btn btn-outline-success btn-block" onclick="navigateTo('./views/update.html')">登録事項変更届出</button>
                            <button type="button" class="btn btn-outline-success btn-block" onclick="navigateTo('./views/delete.html')">登録抹消申出</button>
                            <button type="button" class="btn btn-outline-success btn-block" onclick="navigateTo('./views/application.html')">利用希望申込</button>
                        </div>
                        <div class="col-6 mx-auto mt-5">
                            <button type="button" class="form-control btn btn-secondary" onclick="closeCurrentPage()">閉じる</button>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <!-- <iframe src="./views/menu.html" width="100%" height="100%" frameborder="0"></iframe> -->

        <script>
            function navigateTo(page) {
                liff.init({
                    liffId: '2002392025-Zk8LPK6K'
                })
                .then(() => {
                    // LIFF initialization successful
                    // var outputElement = document.getElementById('output');
                    // outputElement.innerHTML = "LIFF initialized";
                    liff.getProfile()
                        .then((profile) => {
                            console.log('User Profile:', profile);
                            // Access specific profile information
                            var userId = profile.userId;
                            var displayName = profile.displayName;

                            sessionStorage.removeItem("message");
                            sessionStorage.removeItem("userid");
                            sessionStorage.removeItem("displayname");
                            sessionStorage.setItem("message", "LIFF initialization successful");
                            sessionStorage.setItem("userid", userId);
                            sessionStorage.setItem("displayname", displayName);
                            window.location.href = page;
                        })
                        .catch((error) => {
                            console.error('Error getting user profile', error);
                        });
                })
                .catch((error) => {
                    // Handle initialization failure
                    console.error('LIFF initialization failed', error);
                });
            }

            // close current page
            function closeCurrentPage() {
                window.open('', '_self', '');
                window.close(); // Close the current window
            }
        </script>
    </body>
</html>